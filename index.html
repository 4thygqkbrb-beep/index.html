<!DOCTYPE html>
<html>
<head>
  <title>Shorthand Checker</title>
  <style>
    textarea { width: 100%; height: 120px; }
    button { padding: 10px; margin-top: 10px; }
  </style>
</head>
<body>

<h3>Original Text</h3>
<textarea id="original"></textarea>

<h3>Type Here</h3>
<textarea id="typed" onpaste="return false"></textarea>

<button onclick="check()">Check</button>

<h3 id="result"></h3>
<div id="highlighted" style="white-space: pre-wrap; font-size: 16px;"></div>
<script>
function clean(text) {
  return text
    .toLowerCase()
    .replace(/[^\w\s]/g, "")
    .replace(/\s+/g, " ")
    .trim();
}
function check() {
  let originalText = document.getElementById("original").value;
  let typedText = document.getElementById("typed").value;

  if (!typedText.trim()) {
    alert("Type the transcription first");
    return;
  }

  let o = clean(originalText).split(" ");
  let t = clean(typedText).split(" ");

  let i = 0, j = 0;
  let errors = 0;
  let output = [];

  while (i < o.length || j < t.length) {
    if (o[i] === t[j]) {
      output.push(o[i]);
      i++; j++;
    } else {
      if (t[j]) {
        output.push(`<span style="color:red">${t[j]}</span>`);
        errors++;
        j++;
      }
      if (o[i]) {
        i++;
      }
    }
  }

  let accuracy = ((o.length - errors) / o.length) * 100;
  accuracy = accuracy < 0 ? 0 : accuracy.toFixed(2);

  document.getElementById("result").innerText =
    "Total Words: " + o.length +
    "\nErrors: " + errors +
    "\nAccuracy: " + accuracy + "%";

  document.getElementById("highlighted").innerHTML = output.join(" ");
}

}
</script>

</body>
</html>
